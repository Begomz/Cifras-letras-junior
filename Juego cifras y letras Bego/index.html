<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Cifras y Letras Junior</title>

<style>
body {
  margin: 0;
  background: #eef2f5;
  font-family: Arial, sans-serif;
}

#app {
  max-width: 1400px;
  margin: auto;
  padding: 30px;
  text-align: center;
}

h1 {
  font-size: 3vw;
  margin-bottom: 20px;
}

.panel {
  background: white;
  border-radius: 30px;
  padding: 30px;
  margin-bottom: 30px;
}

button {
  font-size: 2vw;
  padding: 20px 30px;
  margin: 15px;
  border-radius: 25px;
  border: none;
  background: #4caf50;
  color: white;
  cursor: pointer;
}

button:hover {
  background: #43a047;
}

.botones-tiempo {
  display: flex;
  justify-content: center;
  gap: 40px;
}

.botones-tiempo button {
  background: #1976d2;
}

#tiempo {
  font-size: 6vw;
  color: #2e7d32;
  margin: 20px;
}

.conjunto {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 25px;
  margin: 25px 0;
}

.conjunto span {
  font-size: 4vw;
  padding: 20px 28px;
  background: #e3f2fd;
  border-radius: 20px;
}

.solucion {
  display: none;
  margin-top: 20px;
  padding: 20px;
  font-size: 2vw;
  background: #fff3cd;
  border-radius: 20px;
}

/* ===== PIE DE AUTOR√çA ===== */
footer {
  margin-top: 40px;
  padding: 20px;
  font-size: 1.2vw;
  color: #555;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 20px;
}

footer img {
  height: 60px;
}
</style>
</head>

<body>

<div id="app">

<h1>üéÆ Cifras y Letras Junior</h1>

<!-- TEMPORIZADOR -->
<div class="panel">
  <h2>‚è±Ô∏è Tiempo</h2>
  <div class="botones-tiempo">
    <button onclick="ajustarTiempo(60)">60 s</button>
    <button onclick="ajustarTiempo(90)">90 s</button>
    <button onclick="ajustarTiempo(120)">120 s</button>
  </div>
  <div id="tiempo">60</div>
  <button onclick="iniciar()">‚ñ∂Ô∏è Iniciar</button>
</div>

<!-- LETRAS -->
<div class="panel">
  <h2>üî§ LETRAS</h2>
  <div class="conjunto" id="letras"></div>
  <button onclick="generarLetras()">Generar letras</button>
  <button onclick="mostrarSolucionLetras()">üë©‚Äçüè´ Soluci√≥n</button>
  <div class="solucion" id="solLetras"></div>
</div>

<!-- CIFRAS -->
<div class="panel">
  <h2>üî¢ CIFRAS</h2>
  <div class="conjunto" id="numeros"></div>
  <h3>üéØ Objetivo: <span id="objetivo"></span></h3>
  <button onclick="generarCifras()">Generar cifras</button>
  <button onclick="mostrarSolucionCifras()">üë©‚Äçüè´ Soluci√≥n</button>
  <div class="solucion" id="solCifras"></div>
</div>

<!-- PIE DE P√ÅGINA -->
<footer>
  <img src="logo.png" alt="Logo del recurso">
  <div>
    <strong>Bego√±a Mella</strong><br>
    Material educativo de uso docente
  </div>
</footer>

</div>

<!-- DICCIONARIO -->
<script src="diccionario_escolar.js"></script>

<script>
/* ===== TEMPORIZADOR ===== */
let tiempo = 60;
let intervalo;

function iniciar() {
  clearInterval(intervalo);
  intervalo = setInterval(() => {
    tiempo--;
    document.getElementById("tiempo").textContent = tiempo;
    if (tiempo <= 0) clearInterval(intervalo);
  }, 1000);
}

function ajustarTiempo(t) {
  tiempo = t;
  document.getElementById("tiempo").textContent = tiempo;
}

/* ===== LETRAS (SIEMPRE HAY PALABRA) ===== */
let letrasActuales = [];

function generarLetras() {
  letrasActuales = [];
  const total = 9;

  const longitudes = Object.keys(DICCIONARIO_ESCOLAR)
    .map(n => parseInt(n))
    .filter(n => n <= total);

  const longitudElegida =
    longitudes[Math.floor(Math.random() * longitudes.length)];

  const palabraBase =
    DICCIONARIO_ESCOLAR[longitudElegida][
      Math.floor(Math.random() * DICCIONARIO_ESCOLAR[longitudElegida].length)
    ].toUpperCase();

  letrasActuales = palabraBase.split("");

  const vocales = "AEIOU";
  const consonantes = "BCDFGHJKLMNPRSTL";

  while (letrasActuales.length < total) {
    letrasActuales.push(
      Math.random() < 0.45
        ? vocales[Math.floor(Math.random() * vocales.length)]
        : consonantes[Math.floor(Math.random() * consonantes.length)]
    );
  }

  for (let i = letrasActuales.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [letrasActuales[i], letrasActuales[j]] =
      [letrasActuales[j], letrasActuales[i]];
  }

  document.getElementById("letras").innerHTML =
    letrasActuales.map(l => `<span>${l}</span>`).join("");

  document.getElementById("solLetras").style.display = "none";
}

function mostrarSolucionLetras() {
  for (let len = 9; len >= 3; len--) {
    const lista = DICCIONARIO_ESCOLAR[len] || [];
    for (let palabra of lista) {
      let disponibles = letrasActuales.slice();
      let valida = true;
      for (let c of palabra.toUpperCase()) {
        const i = disponibles.indexOf(c);
        if (i === -1) { valida = false; break; }
        disponibles.splice(i, 1);
      }
      if (valida) {
        document.getElementById("solLetras").textContent =
          "Palabra posible: " + palabra.toUpperCase();
        document.getElementById("solLetras").style.display = "block";
        return;
      }
    }
  }
}

/* ===== CIFRAS (SIEMPRE HAY SOLUCI√ìN) ===== */
let numerosActuales = [];
let objetivo = 0;
let solucionCifras = "";

function generarCifras() {
  const grandes = [25, 50, 75, 100];
  const pequenos = [1,2,3,4,5,6,7,8,9,10];

  let a = pequenos[Math.floor(Math.random()*pequenos.length)];
  let b = pequenos[Math.floor(Math.random()*pequenos.length)];
  let c = grandes[Math.floor(Math.random()*grandes.length)];

  objetivo = a * b + c;
  solucionCifras = `(${a} √ó ${b}) + ${c}`;

  numerosActuales = [a, b, c];
  while (numerosActuales.length < 6) {
    numerosActuales.push(
      pequenos[Math.floor(Math.random()*pequenos.length)]
    );
  }

  for (let i = numerosActuales.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [numerosActuales[i], numerosActuales[j]] =
      [numerosActuales[j], numerosActuales[i]];
  }

  document.getElementById("numeros").innerHTML =
    numerosActuales.map(n => `<span>${n}</span>`).join("");

  document.getElementById("objetivo").textContent = objetivo;
  document.getElementById("solCifras").style.display = "none";
}

function mostrarSolucionCifras() {
  document.getElementById("solCifras").textContent =
    "Soluci√≥n exacta: " + solucionCifras + " = " + objetivo;
  document.getElementById("solCifras").style.display = "block";
}
</script>

</body>
</html>
